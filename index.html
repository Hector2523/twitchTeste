<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Twitch</title>
    <link rel="stylesheet" href="style/style.css">
    <script src="https://player.twitch.tv/js/embed/v1.js"></script> <!-- Moved this script to the head section -->
</head>
<body>
    <main>
        <div class="iframe" id="twitch-embed"></div>
        <div class="chat">
            <iframe id="twitch-chat" src="https://www.twitch.tv/embed/ciberdracof/chat?parent=http://127.0.0.1:5500/"
                frameborder="0"></iframe>
        </div>
        <div class="field">
            <div>
                <h1>Importar canal</h1>
                <input type="text" id="escolhaCanal" placeholder="Digite o nome do canal">
                <br>
                <button onclick="embedTwitchChannel()">Incorporar Canal</button>
            </div>
        </div>
        <div class="field2">
            <h1>Mostrar chat?</h1>
            <select id="chat" required>
                <option value="none" disabled selected>Selecione uma opção</option>
                <option value="Sim">Sim</option>
                <option value="Não">Não</option>
            </select>
            <br>
            <button onclick="abrirChat()">Aplicar</button>
        </div>
    </main>

    <script type="text/javascript">
        function embedTwitchChannel() {
            let channelName = document.getElementById("escolhaCanal").value;
            document.getElementById("twitch-embed").innerHTML = "";
            new Twitch.Player("twitch-embed", {
                channel: channelName
            });
        }

        function abrirChat() {
            let chatSelect = document.getElementById("chat");
            let iframe = document.getElementById("twitch-chat");

            switch (chatSelect.value) {
                case "Sim":
                    iframe.style.display = "block";
                    break;
                case "Não":
                    iframe.style.display = "none";
                    break;
                default:
                    alert("Opção inválida");
            }
        }
    </script>
</body>
</html>
